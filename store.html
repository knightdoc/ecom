<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>River City Bakery | Store</title>
  <meta name="description" content="Shop fresh breads, pastries, and drinks from River City Bakery." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="stylehome.css">
</head>
<body>
  
  <header>
    <div class="container nav">
      <a class="brand" href="index.html" aria-label="River City Bakery home">
        <div class="brand-logo" aria-hidden="true"></div>
        <span class="brand-name">River City Bakery</span>
      </a>
      <button class="nav-toggle" aria-label="Toggle menu">‚ò∞</button>
      <nav class="menu" aria-label="Main">
        <a href="index.html">Home</a>
        <a href="menu.html">Menu</a>
        <a href="store.html" aria-current="page">Store üõí</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <section class="section" style="padding-top:20px;">
    <div class="container">
      <h1 class="brand-name" style="font-size:1.8rem;">Order Fresh Breads, Pastries & Drinks</h1>
      <p class="tiny" style="max-width:720px">
        Small-batch, baked fresh daily. Browse our customer favorites and seasonal specials, add to cart,
        and choose in-store pickup at checkout.
      </p>
      <div class="promo" style="margin-top:14px;">
        <strong>Tip:</strong> Use search and filters to find your favorites faster. ü•ñü•ê‚òï
      </div>
    </div>
  </section>

  <section class="section" style="padding-top:0;">
    <div class="container newsletter">
      <form id="filters" class="row" onsubmit="event.preventDefault()">
        <input type="search" id="q" placeholder="Search items‚Ä¶ (e.g., sourdough)" aria-label="Search products">
        <select id="cat" aria-label="Filter by category">
          <option value="">All categories</option>
          <option value="bread">Breads</option>
          <option value="pastry">Pastries</option>
          <option value="drink">Drinks</option>
          <option value="seasonal">Seasonal</option>
        </select>
        <select id="sort" aria-label="Sort products">
          <option value="popular">Sort: Popular</option>
          <option value="price-asc">Price: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
          <option value="name-asc">Name: A ‚Üí Z</option>
        </select>
        <button class="btn" type="button" id="clearFilters">Clear</button>
        <button class="btn" type="button" id="viewCart">Cart (0)</button>
      </form>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <div id="grid" class="grid" aria-live="polite"></div>
    </div>
  </section>

  <dialog id="cartDialog" aria-labelledby="cartTitle" style="max-width:640px;width:90%;">
    <form method="dialog" style="margin:0;">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;padding:10px 6px;">
        <h2 id="cartTitle" style="margin:0;font-family:'Playfair Display',serif;">Your Cart</h2>
        <button class="btn secondary" value="cancel" aria-label="Close cart">Close</button>
      </div>
      <div id="cartItems" class="container" style="max-height:50vh;overflow:auto;padding-bottom:8px;"></div>
      <div class="container" style="display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-top:1px solid #eee;">
        <strong>Total: <span id="cartTotal">$0.00</span></strong>
        <button class="btn" id="checkoutBtn" value="default">Checkout</button>
      </div>
    </form>
  </dialog>

  <footer>
    <div class="container foot">
      <div>
        <strong>River City Bakery</strong><br/>
        123 Bakery Lane, Jacksonville, FL 32246<br/>
        (123) 456-7890 ‚Ä¢ hello@rivercitybakery.com
        <div class="tiny" style="margin-top:6px">¬© 2025 River City Bakery. All rights reserved.</div>
      </div>
      <div>
        <small>
          <a href="privacy.html">Privacy Policy</a> ¬∑
          <a href="terms.html">Terms</a> ¬∑
          <a href="accessibility.html">Accessibility</a>
        </small>
        <div class="tiny" style="margin-top:8px">Follow us: <a href="#">Instagram</a> ¬∑ <a href="#">Facebook</a> ¬∑ <a href="#">TikTok</a></div>
      </div>
    </div>
  </footer>

  <script>
    // Mobile menu
    const toggle = document.querySelector('.nav-toggle');
    const menu = document.querySelector('.menu');
    toggle?.addEventListener('click', () => menu.classList.toggle('show'));

    const PRODUCTS = [
      // Breads
      { id:'bread-sourdough', name:'Country Sourdough Loaf', price:7.95, category:'bread',
        desc:'72-hour ferment, crackly crust, open crumb.', 
        img:'https://images.unsplash.com/photo-1533681018184-68bd1d883546?q=80&w=1200&auto=format&fit=crop' },
      { id:'bread-baguette', name:'French Baguette', price:3.50, category:'bread',
        desc:'Crisp crust, light interior‚Äîperfect with butter.', 
        img:'https://images.unsplash.com/photo-1513104890138-7c749659a591?q=80&w=1200&auto=format&fit=crop' },
      { id:'bread-multigrain', name:'Hearty Multigrain', price:6.95, category:'bread',
        desc:'Seeds & grains for flavor, fiber, and crunch.', 
        img:'https://images.unsplash.com/photo-1509440159596-0249088772ff?q=80&w=1200&auto=format&fit=crop' },

      // Pastries
      { id:'pastry-croissant', name:'Butter Croissant (3)', price:8.50, category:'pastry',
        desc:'Laminated layers‚Äîflaky, golden, irresistible.', 
        img:'https://images.unsplash.com/photo-1504882310871-cd6e2fb43625?q=80&w=1200&auto=format&fit=crop' },
      { id:'pastry-chocolate', name:'Pain au Chocolat (2)', price:6.75, category:'pastry',
        desc:'Dark chocolate batons wrapped in buttery dough.', 
        img:'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop' },
      { id:'pastry-cinnamon', name:'Cinnamon Roll', price:3.95, category:'pastry',
        desc:'Soft roll, warm spice, vanilla glaze drizzle.', 
        img:'https://images.unsplash.com/photo-1509365465985-25d11c17e812?q=80&w=1200&auto=format&fit=crop' },

      // Drinks
      { id:'drink-coldbrew', name:'Cold Brew Coffee', price:3.95, category:'drink',
        desc:'12-hour steeped, smooth with chocolate notes.', 
        img:'https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?q=80&w=1200&auto=format&fit=crop' },
      { id:'drink-latte', name:'Vanilla Latte', price:4.50, category:'drink',
        desc:'Velvety espresso with microfoam and vanilla.', 
        img:'https://images.unsplash.com/photo-1432107294469-414527cb5c65?q=80&w=1200&auto=format&fit=crop' },
      { id:'drink-tea', name:'Iced Black Tea (Unsweet)', price:2.50, category:'drink',
        desc:'Refreshing, clean finish‚Äîadd lemon if you like.', 
        img:'https://images.unsplash.com/photo-1494314671902-399b18174975?q=80&w=1200&auto=format&fit=crop' },

      // Seasonal
      { id:'seasonal-pumpkin', name:'Pumpkin Spice Muffin (2)', price:5.50, category:'seasonal',
        desc:'Seasonal favorite‚Äîwarm spice & streusel top.', 
        img:'https://images.unsplash.com/photo-1511381939415-c1c76b7a8e85?q=80&w=1200&auto=format&fit=crop' },
      { id:'seasonal-fruittart', name:'Fresh Fruit Tart', price:4.95, category:'seasonal',
        desc:'Vanilla pastry cream, glossy seasonal fruit.', 
        img:'https://images.unsplash.com/photo-1461009683696-876b66f9eb5b?q=80&w=1200&auto=format&fit=crop' }
    ];

    const grid = document.getElementById('grid');
    function fmt(n){ return n.toLocaleString(undefined, {style:'currency', currency:'USD'}); }

    function productCard(p){
      const el = document.createElement('article');
      el.className = 'card';
      el.setAttribute('data-cat', p.category);
      el.setAttribute('data-name', p.name.toLowerCase());
      el.setAttribute('data-price', p.price);
      el.innerHTML = `
        <img src="${p.img}" alt="${p.name}">
        <div class="card-body">
          <h3>${p.name}</h3>
          <p class="tiny">${p.desc}</p>
          <div class="price">${fmt(p.price)}</div>
          <button class="btn add" data-id="${p.id}">Add to Cart</button>
        </div>`;
      return el;
    }
    function render(products){
      grid.innerHTML = '';
      products.forEach(p => grid.appendChild(productCard(p)));
      bindAddButtons();
    }

    /** Filters / Sort  **/
    const q = document.getElementById('q');
    const cat = document.getElementById('cat');
    const sort = document.getElementById('sort');
    const clearBtn = document.getElementById('clearFilters');

    function applyFilters(){
      let list = [...PRODUCTS];
      const query = q.value.trim().toLowerCase();
      const category = cat.value;

      if(query){
        list = list.filter(p => p.name.toLowerCase().includes(query) || p.desc.toLowerCase().includes(query));
      }
      if(category){
        list = list.filter(p => p.category === category);
      }
      switch(sort.value){
        case 'price-asc':  list.sort((a,b)=>a.price-b.price); break;
        case 'price-desc': list.sort((a,b)=>b.price-a.price); break;
        case 'name-asc':   list.sort((a,b)=>a.name.localeCompare(b.name)); break;
        default: /* popular */ break;
      }
      render(list);
    }
    q.addEventListener('input', applyFilters);
    cat.addEventListener('change', applyFilters);
    sort.addEventListener('change', applyFilters);
    clearBtn.addEventListener('click', () => {
      q.value = ''; cat.value = ''; sort.value = 'popular';
      applyFilters();
    });

    /** Cart localStorage  **/
    const cartKey = 'rcb_cart_v1';
    const viewCartBtn = document.getElementById('viewCart');
    const cartDialog = document.getElementById('cartDialog');
    const cartItems = document.getElementById('cartItems');
    const cartTotal = document.getElementById('cartTotal');

    let CART = JSON.parse(localStorage.getItem(cartKey) || '[]'); // [{id, qty}]

    function saveCart(){
      localStorage.setItem(cartKey, JSON.stringify(CART));
      updateCartCount();
    }
    function updateCartCount(){
      const count = CART.reduce((n,i)=>n+i.qty,0);
      viewCartBtn.textContent = `Cart (${count})`;
    }
    function addToCart(id){
      const item = CART.find(i=>i.id===id);
      if(item) item.qty++;
      else CART.push({id, qty:1});
      saveCart();
    }
    function removeFromCart(id){
      CART = CART.filter(i=>i.id!==id);
      saveCart();
      renderCart();
    }
    function changeQty(id, delta){
      const it = CART.find(i=>i.id===id);
      if(!it) return;
      it.qty += delta;
      if(it.qty<=0){ removeFromCart(id); return; }
      saveCart();
      renderCart();
    }
    function renderCart(){
      if(CART.length===0){
        cartItems.innerHTML = '<p class="tiny">Your cart is empty.</p>';
        cartTotal.textContent = fmt(0);
        return;
      }
      const lines = CART.map(ci=>{
        const p = PRODUCTS.find(x=>x.id===ci.id);
        const line = p.price * ci.qty;
        return `
          <div class="card" style="margin:8px 0;">
            <div class="card-body" style="display:flex;gap:12px;align-items:center;">
              <img src="${p.img}" alt="${p.name}" style="width:72px;height:72px;object-fit:cover;border-radius:8px;">
              <div style="flex:1;">
                <strong>${p.name}</strong>
                <div class="tiny">${fmt(p.price)} each</div>
              </div>
              <div style="display:flex;align-items:center;gap:8px;">
                <button class="btn secondary" data-act="dec" data-id="${ci.id}" aria-label="Decrease quantity">‚àí</button>
                <span><strong>${ci.qty}</strong></span>
                <button class="btn" data-act="inc" data-id="${ci.id}" aria-label="Increase quantity">+</button>
              </div>
              <div style="width:90px;text-align:right;"><strong>${fmt(line)}</strong></div>
              <button class="btn secondary" data-act="rm" data-id="${ci.id}" aria-label="Remove item">Remove</button>
            </div>
          </div>`;
      }).join('');
      cartItems.innerHTML = lines;
      const total = CART.reduce((sum,ci)=>{
        const p = PRODUCTS.find(x=>x.id===ci.id);
        return sum + p.price*ci.qty;
      },0);
      cartTotal.textContent = fmt(total);

      cartItems.querySelectorAll('button[data-act]').forEach(b=>{
        const id = b.getAttribute('data-id');
        const act = b.getAttribute('data-act');
        b.addEventListener('click', ()=>{
          if(act==='inc') changeQty(id, +1);
          if(act==='dec') changeQty(id, -1);
          if(act==='rm')  removeFromCart(id);
        });
      });
    }
    function bindAddButtons(){
      document.querySelectorAll('.add').forEach(btn=>{
        btn.addEventListener('click', e=>{
          const id = e.currentTarget.getAttribute('data-id');
          addToCart(id);
          alert('Added to cart üõí');
        });
      });
    }

    viewCartBtn.addEventListener('click', ()=>{
      renderCart();
      cartDialog.showModal();
    });
    document.getElementById('checkoutBtn').addEventListener('click', (e)=>{
      e.preventDefault();
      alert('Checkout demo ‚Äî connect to your order/checkout flow next.');
      cartDialog.close();
    });

    updateCartCount();
    applyFilters();
  </script>
</body>
</html>
